{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "8XNB2EeXR4DA"
   },
   "source": [
    "# Transforming API results into Pandas dataframes\n",
    "\n",
    "DimCli includes a few utilities that make it easier to transform Dimensions JSON data into Pandas [dataframe objects](https://pandas.pydata.org/pandas-docs/stable/getting_started/dsintro.html#dataframe). \n",
    "\n",
    "Dataframes are then easy to sort, analyse, export as CSV and use within visualisation softwares.\n",
    "\n",
    ">  [pandas](https://pandas.pydata.org/pandas-docs/stable/) is a popular software library written for the Python programming language for data manipulation and analysis."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 51
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 6993,
     "status": "ok",
     "timestamp": 1575637337420,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "ZFn1lPjmR4DB",
    "outputId": "3af69bca-ad2c-4f80-e4db-e5fe39d379fa"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DimCli v0.6.2.4 - Succesfully connected to <https://app.dimensions.ai> (method: dsl.ini file)\n"
     ]
    }
   ],
   "source": [
    "# @markdown Click the 'play' button on the left (or shift+enter) after entering your API credentials\n",
    "\n",
    "username = \"\" #@param {type: \"string\"}\n",
    "password = \"\" #@param {type: \"string\"}\n",
    "endpoint = \"https://app.dimensions.ai\"\n",
    "\n",
    "!pip install dimcli -U --quiet\n",
    "\n",
    "# import all libraries and login\n",
    "import pandas\n",
    "import dimcli\n",
    "dimcli.login(username, password, endpoint)\n",
    "dsl = dimcli.Dsl()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "oMLG9WL0R4DE"
   },
   "source": [
    "## 1. The `Dataset.as_dataframe` method\n",
    "\n",
    "This utility method allows to quickly turn any query results into a dataframe. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 34
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 3008,
     "status": "ok",
     "timestamp": 1574681077688,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "19qgos2dR4DF",
    "outputId": "a4bdf8a3-a760-4b80-cb1d-fb89b6cf08ca"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 1000 (total = 405843)\n"
     ]
    }
   ],
   "source": [
    "# we'll reuse this query later on \n",
    "query = \"\"\"search publications for \"graphene\" \n",
    "            where year in [2013:2019] \n",
    "            return publications sort by times_cited limit 1000\"\"\"\n",
    "res = dsl.query(query)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 1000
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1346,
     "status": "ok",
     "timestamp": 1574681079469,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "6LCGKJPwR4DG",
    "outputId": "b0b6e7e6-10de-4a17-e037-33083352fc8f"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>author_affiliations</th>\n",
       "      <th>volume</th>\n",
       "      <th>pages</th>\n",
       "      <th>year</th>\n",
       "      <th>title</th>\n",
       "      <th>id</th>\n",
       "      <th>type</th>\n",
       "      <th>issue</th>\n",
       "      <th>journal.id</th>\n",
       "      <th>journal.title</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>[[{'first_name': 'Manish', 'last_name': 'Chhow...</td>\n",
       "      <td>5</td>\n",
       "      <td>263-275</td>\n",
       "      <td>2013</td>\n",
       "      <td>The chemistry of two-dimensional layered trans...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>article</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1041224</td>\n",
       "      <td>Nature Chemistry</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>[[{'first_name': 'A. K.', 'last_name': 'Geim',...</td>\n",
       "      <td>499</td>\n",
       "      <td>419-425</td>\n",
       "      <td>2013</td>\n",
       "      <td>Van der Waals heterostructures</td>\n",
       "      <td>pub.1024857999</td>\n",
       "      <td>article</td>\n",
       "      <td>7459</td>\n",
       "      <td>jour.1018957</td>\n",
       "      <td>Nature</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2013</td>\n",
       "      <td>Nanoenergy, Nanotechnology Applied for Energy ...</td>\n",
       "      <td>pub.1031762191</td>\n",
       "      <td>book</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>[[{'first_name': 'C.', 'last_name': 'Patrignan...</td>\n",
       "      <td>40</td>\n",
       "      <td>100001</td>\n",
       "      <td>2016</td>\n",
       "      <td>Review of Particle Physics</td>\n",
       "      <td>pub.1059158429</td>\n",
       "      <td>article</td>\n",
       "      <td>10</td>\n",
       "      <td>jour.1327822</td>\n",
       "      <td>Chinese Physics C</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>[[{'first_name': 'John B.', 'last_name': 'Good...</td>\n",
       "      <td>135</td>\n",
       "      <td>1167-76</td>\n",
       "      <td>2013</td>\n",
       "      <td>The Li-ion rechargeable battery: a perspective.</td>\n",
       "      <td>pub.1019126274</td>\n",
       "      <td>article</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1081898</td>\n",
       "      <td>Journal of the American Chemical Society</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>[[{'first_name': 'Andrea C.', 'last_name': 'Fe...</td>\n",
       "      <td>8</td>\n",
       "      <td>235-246</td>\n",
       "      <td>2013</td>\n",
       "      <td>Raman spectroscopy as a versatile tool for stu...</td>\n",
       "      <td>pub.1015305822</td>\n",
       "      <td>article</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1037429</td>\n",
       "      <td>Nature Nanotechnology</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>[[{'first_name': 'Han', 'last_name': 'Liu', 'c...</td>\n",
       "      <td>8</td>\n",
       "      <td>4033-41</td>\n",
       "      <td>2014</td>\n",
       "      <td>Phosphorene: an unexplored 2D semiconductor wi...</td>\n",
       "      <td>pub.1009826879</td>\n",
       "      <td>article</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1038917</td>\n",
       "      <td>ACS Nano</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>[[{'first_name': 'Sheneve Z.', 'last_name': 'B...</td>\n",
       "      <td>7</td>\n",
       "      <td>2898-926</td>\n",
       "      <td>2013</td>\n",
       "      <td>Progress, challenges, and opportunities in two...</td>\n",
       "      <td>pub.1038090434</td>\n",
       "      <td>article</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1038917</td>\n",
       "      <td>ACS Nano</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>[[{'first_name': 'Mingsheng', 'last_name': 'Xu...</td>\n",
       "      <td>113</td>\n",
       "      <td>3766-98</td>\n",
       "      <td>2013</td>\n",
       "      <td>Graphene-like two-dimensional materials.</td>\n",
       "      <td>pub.1022830330</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>jour.1077147</td>\n",
       "      <td>Chemical Reviews</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>[[{'first_name': 'Oriol', 'last_name': 'Lopez-...</td>\n",
       "      <td>8</td>\n",
       "      <td>497-501</td>\n",
       "      <td>2013</td>\n",
       "      <td>Ultrasensitive photodetectors based on monolay...</td>\n",
       "      <td>pub.1023181230</td>\n",
       "      <td>article</td>\n",
       "      <td>7</td>\n",
       "      <td>jour.1037429</td>\n",
       "      <td>Nature Nanotechnology</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                 author_affiliations volume     pages  year  \\\n",
       "0  [[{'first_name': 'Manish', 'last_name': 'Chhow...      5   263-275  2013   \n",
       "1  [[{'first_name': 'A. K.', 'last_name': 'Geim',...    499   419-425  2013   \n",
       "2                                                NaN    NaN       NaN  2013   \n",
       "3  [[{'first_name': 'C.', 'last_name': 'Patrignan...     40    100001  2016   \n",
       "4  [[{'first_name': 'John B.', 'last_name': 'Good...    135   1167-76  2013   \n",
       "5  [[{'first_name': 'Andrea C.', 'last_name': 'Fe...      8   235-246  2013   \n",
       "6  [[{'first_name': 'Han', 'last_name': 'Liu', 'c...      8   4033-41  2014   \n",
       "7  [[{'first_name': 'Sheneve Z.', 'last_name': 'B...      7  2898-926  2013   \n",
       "8  [[{'first_name': 'Mingsheng', 'last_name': 'Xu...    113   3766-98  2013   \n",
       "9  [[{'first_name': 'Oriol', 'last_name': 'Lopez-...      8   497-501  2013   \n",
       "\n",
       "                                               title              id     type  \\\n",
       "0  The chemistry of two-dimensional layered trans...  pub.1050119463  article   \n",
       "1                     Van der Waals heterostructures  pub.1024857999  article   \n",
       "2  Nanoenergy, Nanotechnology Applied for Energy ...  pub.1031762191     book   \n",
       "3                         Review of Particle Physics  pub.1059158429  article   \n",
       "4    The Li-ion rechargeable battery: a perspective.  pub.1019126274  article   \n",
       "5  Raman spectroscopy as a versatile tool for stu...  pub.1015305822  article   \n",
       "6  Phosphorene: an unexplored 2D semiconductor wi...  pub.1009826879  article   \n",
       "7  Progress, challenges, and opportunities in two...  pub.1038090434  article   \n",
       "8           Graphene-like two-dimensional materials.  pub.1022830330  article   \n",
       "9  Ultrasensitive photodetectors based on monolay...  pub.1023181230  article   \n",
       "\n",
       "  issue    journal.id                             journal.title  \n",
       "0     4  jour.1041224                          Nature Chemistry  \n",
       "1  7459  jour.1018957                                    Nature  \n",
       "2   NaN           NaN                                       NaN  \n",
       "3    10  jour.1327822                         Chinese Physics C  \n",
       "4     4  jour.1081898  Journal of the American Chemical Society  \n",
       "5     4  jour.1037429                     Nature Nanotechnology  \n",
       "6     4  jour.1038917                                  ACS Nano  \n",
       "7     4  jour.1038917                                  ACS Nano  \n",
       "8     5  jour.1077147                          Chemical Reviews  \n",
       "9     7  jour.1037429                     Nature Nanotechnology  "
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = res.as_dataframe()\n",
    "df.head(10)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "tCq1lF6HR4DI"
   },
   "source": [
    "Pandas dataframes offer a myriad of utilities for inspecting data. Check out the [official docs](https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html) or google a [pandas tutorial](https://www.google.com/search?q=pandas+tutorial) to lean more about it. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 34
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1124,
     "status": "ok",
     "timestamp": 1574681118435,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "k_3GoeDkR4DJ",
    "outputId": "04323988-d055-4928-80f9-b283b34c8328"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(1000, 10)"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# the table shape\n",
    "df.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 136
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 929,
     "status": "ok",
     "timestamp": 1574681130276,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "CjvMBNCBR4DK",
    "outputId": "771e011c-1a06-43d4-a12c-851e9edacce0"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "2013    357\n",
       "2014    295\n",
       "2015    201\n",
       "2016     92\n",
       "2017     47\n",
       "2018      8\n",
       "Name: year, dtype: int64"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# the 'value_counts' method returns the distribution of a specific field eg publication [years]\n",
    "df['year'].value_counts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 102
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 817,
     "status": "ok",
     "timestamp": 1574681132393,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "vndAnGmyR4DM",
    "jupyter": {
     "source_hidden": true
    },
    "outputId": "68301915-01d4-46fc-ddb2-5fa23f768e3f"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "article      995\n",
       "monograph      2\n",
       "book           2\n",
       "chapter        1\n",
       "Name: type, dtype: int64"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# eg distribution of publication [type]\n",
    "df['type'].value_counts()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "7jTpb7lbMH5J"
   },
   "source": [
    "### Magic commands: `%dsldf` and `%dslloopdf` \n",
    "\n",
    "Dimcli includes a few [Python magic commands](https://ipython.readthedocs.io/en/stable/interactive/magics.html) that make working with dataframes easier. \n",
    "\n",
    "Magic commands can be very useful when testing things out e.g. while trying out a new query, or checking what data is available in Dimensions on a certain topic. \n",
    "\n",
    "Moreover, if you hit **'tab'** after the command, you can also take advantage of a custom **Dimensions Search Language autocompleter**. \n",
    "\n",
    "**Single-line version** "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 51
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1111,
     "status": "ok",
     "timestamp": 1574679526526,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "A_fjxss0MH5K",
    "outputId": "26d947c7-c660-45e3-8b94-c379e04ec2a1"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 20 (total = 943)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>author_affiliations</th>\n",
       "      <th>id</th>\n",
       "      <th>issue</th>\n",
       "      <th>journal.id</th>\n",
       "      <th>journal.title</th>\n",
       "      <th>pages</th>\n",
       "      <th>title</th>\n",
       "      <th>type</th>\n",
       "      <th>volume</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>NaN</td>\n",
       "      <td>pub.1124361199</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-1</td>\n",
       "      <td>Publisher Correction: Perovskites take steps t...</td>\n",
       "      <td>article</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>[[{'first_name': 'Kimberly S.', 'last_name': '...</td>\n",
       "      <td>pub.1124340939</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-11</td>\n",
       "      <td>Peer influence on household energy behaviours</td>\n",
       "      <td>article</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>[[{'first_name': 'Jennifer', 'last_name': 'Wil...</td>\n",
       "      <td>pub.1124342004</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-2</td>\n",
       "      <td>An electro-swing approach</td>\n",
       "      <td>article</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>[[{'first_name': 'Xiaopeng', 'last_name': 'Zhe...</td>\n",
       "      <td>pub.1124190675</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-10</td>\n",
       "      <td>Managing grains and interfaces via ligand anch...</td>\n",
       "      <td>article</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>[[{'first_name': 'Abhishek', 'last_name': 'Kar...</td>\n",
       "      <td>pub.1124192098</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-2</td>\n",
       "      <td>Capital cost subsidies through India’s Ujjwala...</td>\n",
       "      <td>article</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>[[{'first_name': 'Giulia', 'last_name': 'Tregn...</td>\n",
       "      <td>pub.1124223699</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>2-2</td>\n",
       "      <td>High-speed films</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>[[{'first_name': 'Deepak', 'last_name': 'Rajag...</td>\n",
       "      <td>pub.1124048660</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>18-19</td>\n",
       "      <td>The United States can generate up to 3.2 EJ of...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>[[{'first_name': 'Lee V.', 'last_name': 'White...</td>\n",
       "      <td>pub.1123426945</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>16-17</td>\n",
       "      <td>Varied health and financial impacts of time-of...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>[[{'first_name': 'Nicky', 'last_name': 'Dean',...</td>\n",
       "      <td>pub.1124213396</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>5-5</td>\n",
       "      <td>Performance factors</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>[[{'first_name': 'Linan', 'last_name': 'Zhou',...</td>\n",
       "      <td>pub.1123828460</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>61-70</td>\n",
       "      <td>Light-driven methane dry reforming with single...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>[[{'first_name': 'Johan', 'last_name': 'Lillie...</td>\n",
       "      <td>pub.1124049483</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>71-78</td>\n",
       "      <td>Understanding and accounting for the effect of...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>[[{'first_name': 'Chuan', 'last_name': 'Xia', ...</td>\n",
       "      <td>pub.1123470085</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>90-90</td>\n",
       "      <td>Author Correction: Continuous production of pu...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>[[{'first_name': 'Joel', 'last_name': 'Jean', ...</td>\n",
       "      <td>pub.1124190016</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>10-11</td>\n",
       "      <td>Getting high with quantum dot solar cells</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>[[{'first_name': 'Sujoy', 'last_name': 'Saha',...</td>\n",
       "      <td>pub.1123462690</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>91-91</td>\n",
       "      <td>Publisher Correction: Exploring the bottleneck...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>[[{'first_name': 'Mengmeng', 'last_name': 'Hao...</td>\n",
       "      <td>pub.1124192096</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>79-88</td>\n",
       "      <td>Ligand-assisted cation-exchange engineering fo...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>[[{'first_name': 'Jenn', 'last_name': 'Richler...</td>\n",
       "      <td>pub.1124217194</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>4-4</td>\n",
       "      <td>Effective stakeholder engagement</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>[[{'first_name': 'Yimin A.', 'last_name': 'Wu'...</td>\n",
       "      <td>pub.1122796302</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>89-89</td>\n",
       "      <td>Author Correction: Facet-dependent active site...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>[[{'first_name': 'Sarah Josephine', 'last_name...</td>\n",
       "      <td>pub.1124049220</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>14-15</td>\n",
       "      <td>Careful currency conversion</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>NaN</td>\n",
       "      <td>pub.1124222189</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>1-1</td>\n",
       "      <td>Perovskites take steps to industrialization</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>[[{'first_name': 'Wangda', 'last_name': 'Li', ...</td>\n",
       "      <td>pub.1124049278</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1136447</td>\n",
       "      <td>Nature Energy</td>\n",
       "      <td>26-34</td>\n",
       "      <td>High-nickel layered oxide cathodes for lithium...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2020</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                  author_affiliations              id issue  \\\n",
       "0                                                 NaN  pub.1124361199   NaN   \n",
       "1   [[{'first_name': 'Kimberly S.', 'last_name': '...  pub.1124340939   NaN   \n",
       "2   [[{'first_name': 'Jennifer', 'last_name': 'Wil...  pub.1124342004   NaN   \n",
       "3   [[{'first_name': 'Xiaopeng', 'last_name': 'Zhe...  pub.1124190675   NaN   \n",
       "4   [[{'first_name': 'Abhishek', 'last_name': 'Kar...  pub.1124192098   NaN   \n",
       "5   [[{'first_name': 'Giulia', 'last_name': 'Tregn...  pub.1124223699     1   \n",
       "6   [[{'first_name': 'Deepak', 'last_name': 'Rajag...  pub.1124048660     1   \n",
       "7   [[{'first_name': 'Lee V.', 'last_name': 'White...  pub.1123426945     1   \n",
       "8   [[{'first_name': 'Nicky', 'last_name': 'Dean',...  pub.1124213396     1   \n",
       "9   [[{'first_name': 'Linan', 'last_name': 'Zhou',...  pub.1123828460     1   \n",
       "10  [[{'first_name': 'Johan', 'last_name': 'Lillie...  pub.1124049483     1   \n",
       "11  [[{'first_name': 'Chuan', 'last_name': 'Xia', ...  pub.1123470085     1   \n",
       "12  [[{'first_name': 'Joel', 'last_name': 'Jean', ...  pub.1124190016     1   \n",
       "13  [[{'first_name': 'Sujoy', 'last_name': 'Saha',...  pub.1123462690     1   \n",
       "14  [[{'first_name': 'Mengmeng', 'last_name': 'Hao...  pub.1124192096     1   \n",
       "15  [[{'first_name': 'Jenn', 'last_name': 'Richler...  pub.1124217194     1   \n",
       "16  [[{'first_name': 'Yimin A.', 'last_name': 'Wu'...  pub.1122796302     1   \n",
       "17  [[{'first_name': 'Sarah Josephine', 'last_name...  pub.1124049220     1   \n",
       "18                                                NaN  pub.1124222189     1   \n",
       "19  [[{'first_name': 'Wangda', 'last_name': 'Li', ...  pub.1124049278     1   \n",
       "\n",
       "      journal.id  journal.title  pages  \\\n",
       "0   jour.1136447  Nature Energy    1-1   \n",
       "1   jour.1136447  Nature Energy   1-11   \n",
       "2   jour.1136447  Nature Energy    1-2   \n",
       "3   jour.1136447  Nature Energy   1-10   \n",
       "4   jour.1136447  Nature Energy    1-2   \n",
       "5   jour.1136447  Nature Energy    2-2   \n",
       "6   jour.1136447  Nature Energy  18-19   \n",
       "7   jour.1136447  Nature Energy  16-17   \n",
       "8   jour.1136447  Nature Energy    5-5   \n",
       "9   jour.1136447  Nature Energy  61-70   \n",
       "10  jour.1136447  Nature Energy  71-78   \n",
       "11  jour.1136447  Nature Energy  90-90   \n",
       "12  jour.1136447  Nature Energy  10-11   \n",
       "13  jour.1136447  Nature Energy  91-91   \n",
       "14  jour.1136447  Nature Energy  79-88   \n",
       "15  jour.1136447  Nature Energy    4-4   \n",
       "16  jour.1136447  Nature Energy  89-89   \n",
       "17  jour.1136447  Nature Energy  14-15   \n",
       "18  jour.1136447  Nature Energy    1-1   \n",
       "19  jour.1136447  Nature Energy  26-34   \n",
       "\n",
       "                                                title     type volume  year  \n",
       "0   Publisher Correction: Perovskites take steps t...  article    NaN  2020  \n",
       "1       Peer influence on household energy behaviours  article    NaN  2020  \n",
       "2                           An electro-swing approach  article    NaN  2020  \n",
       "3   Managing grains and interfaces via ligand anch...  article    NaN  2020  \n",
       "4   Capital cost subsidies through India’s Ujjwala...  article    NaN  2020  \n",
       "5                                    High-speed films  article      5  2020  \n",
       "6   The United States can generate up to 3.2 EJ of...  article      5  2020  \n",
       "7   Varied health and financial impacts of time-of...  article      5  2020  \n",
       "8                                 Performance factors  article      5  2020  \n",
       "9   Light-driven methane dry reforming with single...  article      5  2020  \n",
       "10  Understanding and accounting for the effect of...  article      5  2020  \n",
       "11  Author Correction: Continuous production of pu...  article      5  2020  \n",
       "12          Getting high with quantum dot solar cells  article      5  2020  \n",
       "13  Publisher Correction: Exploring the bottleneck...  article      5  2020  \n",
       "14  Ligand-assisted cation-exchange engineering fo...  article      5  2020  \n",
       "15                   Effective stakeholder engagement  article      5  2020  \n",
       "16  Author Correction: Facet-dependent active site...  article      5  2020  \n",
       "17                        Careful currency conversion  article      5  2020  \n",
       "18        Perovskites take steps to industrialization  article      5  2020  \n",
       "19  High-nickel layered oxide cathodes for lithium...  article      5  2020  "
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%dsldf search publications where journal.id=\"jour.1136447\" return publications"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "3EY_aJY_MH5M"
   },
   "source": [
    "**Multi-line version** \n",
    "\n",
    "You can split the query into multiple lines, only this time you need to use the `%%dsldf` command (two `%`): "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 51
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 691,
     "status": "ok",
     "timestamp": 1574679571696,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "xlLuMnCsMH5N",
    "outputId": "836d0ccb-895c-4eca-b988-6bb333c5bacb"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 20 (total = 3826)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>times_cited</th>\n",
       "      <th>title</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>423</td>\n",
       "      <td>Asymmetric Supercapacitors Using 3D Nanoporous...</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>410</td>\n",
       "      <td>CH3NH3SnxPb(1-x)I3 Perovskite Solar Cells Cove...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>308</td>\n",
       "      <td>Pt‐Free Counter Electrode for Dye‐Sensitized S...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>237</td>\n",
       "      <td>Hierarchical Gaussian Descriptor for Person Re...</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>233</td>\n",
       "      <td>Brain Intelligence: Go beyond Artificial Intel...</td>\n",
       "      <td>2018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>231</td>\n",
       "      <td>Improved understanding of the electronic and e...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>211</td>\n",
       "      <td>Comparative study of ceramic and single crysta...</td>\n",
       "      <td>2013</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>205</td>\n",
       "      <td>Underwater image dehazing using joint trilater...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>182</td>\n",
       "      <td>Flexible Graphene-Based Supercapacitors: A Review</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>164</td>\n",
       "      <td>Recent Progress of Counter Electrode Catalysts...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>152</td>\n",
       "      <td>Hole-Conductor-Free, Metal-Electrode-Free TiO2...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>138</td>\n",
       "      <td>Study of rare-earth-doped scintillators</td>\n",
       "      <td>2013</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>137</td>\n",
       "      <td>Highly Luminescent Phase-Stable CsPbI3 Perovsk...</td>\n",
       "      <td>2017</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>132</td>\n",
       "      <td>Motor Anomaly Detection for Unmanned Aerial Ve...</td>\n",
       "      <td>2018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>130</td>\n",
       "      <td>Low-Temperature and Solution-Processed Amorpho...</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>123</td>\n",
       "      <td>Low illumination underwater light field images...</td>\n",
       "      <td>2018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>114</td>\n",
       "      <td>All-Solid Perovskite Solar Cells with HOCO-R-N...</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>111</td>\n",
       "      <td>Implementation of Super-Twisting Control: Supe...</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>107</td>\n",
       "      <td>Maximum Torque per Ampere (MTPA) Control of an...</td>\n",
       "      <td>2013</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>104</td>\n",
       "      <td>Insight into Perovskite Solar Cells Based on S...</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    times_cited                                              title  year\n",
       "0           423  Asymmetric Supercapacitors Using 3D Nanoporous...  2015\n",
       "1           410  CH3NH3SnxPb(1-x)I3 Perovskite Solar Cells Cove...  2014\n",
       "2           308  Pt‐Free Counter Electrode for Dye‐Sensitized S...  2014\n",
       "3           237  Hierarchical Gaussian Descriptor for Person Re...  2016\n",
       "4           233  Brain Intelligence: Go beyond Artificial Intel...  2018\n",
       "5           231  Improved understanding of the electronic and e...  2014\n",
       "6           211  Comparative study of ceramic and single crysta...  2013\n",
       "7           205  Underwater image dehazing using joint trilater...  2014\n",
       "8           182  Flexible Graphene-Based Supercapacitors: A Review  2016\n",
       "9           164  Recent Progress of Counter Electrode Catalysts...  2014\n",
       "10          152  Hole-Conductor-Free, Metal-Electrode-Free TiO2...  2014\n",
       "11          138            Study of rare-earth-doped scintillators  2013\n",
       "12          137  Highly Luminescent Phase-Stable CsPbI3 Perovsk...  2017\n",
       "13          132  Motor Anomaly Detection for Unmanned Aerial Ve...  2018\n",
       "14          130  Low-Temperature and Solution-Processed Amorpho...  2015\n",
       "15          123  Low illumination underwater light field images...  2018\n",
       "16          114  All-Solid Perovskite Solar Cells with HOCO-R-N...  2014\n",
       "17          111  Implementation of Super-Twisting Control: Supe...  2016\n",
       "18          107  Maximum Torque per Ampere (MTPA) Control of an...  2013\n",
       "19          104  Insight into Perovskite Solar Cells Based on S...  2015"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%%dsldf\n",
    "search publications\n",
    "where year in [2013:2018] and research_orgs=\"grid.258806.1\"\n",
    "return publications[title+year+times_cited] sort by times_cited"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "q28DFy5kS2Q3"
   },
   "source": [
    "Note: the autocompleter is available only with single-line queries."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "3EY_aJY_MH5M"
   },
   "source": [
    "**Loop versions**\n",
    "\n",
    "Two more magic commands are available: \n",
    "\n",
    "* `%dslloopdf` (single-line) \n",
    "* `%%dslloopdf` (multi-line) \n",
    "\n",
    "These commands behave just like the ones above, only they trigger an **iterative query** that will attempt to extract all records available for a chosen DSL query up to the maximum limit of 50k.  \n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "5F1PvQXRMH5P"
   },
   "source": [
    "### Accessing data returned by magic queries\n",
    "\n",
    "By default the results of magic command queries are saved into a variable called `dsl_last_results`:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "OqZ5WnLcMH5Q",
    "outputId": "ce297b78-d553-41eb-e870-32bb090abf79"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "pandas.core.frame.DataFrame"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "type(dsl_last_results)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>times_cited</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>20.000000</td>\n",
       "      <td>20.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>192.600000</td>\n",
       "      <td>2015.050000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>94.126119</td>\n",
       "      <td>1.669384</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>104.000000</td>\n",
       "      <td>2013.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>128.250000</td>\n",
       "      <td>2014.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>158.000000</td>\n",
       "      <td>2014.500000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>231.500000</td>\n",
       "      <td>2016.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>423.000000</td>\n",
       "      <td>2018.000000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       times_cited         year\n",
       "count    20.000000    20.000000\n",
       "mean    192.600000  2015.050000\n",
       "std      94.126119     1.669384\n",
       "min     104.000000  2013.000000\n",
       "25%     128.250000  2014.000000\n",
       "50%     158.000000  2014.500000\n",
       "75%     231.500000  2016.000000\n",
       "max     423.000000  2018.000000"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dsl_last_results.describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "ye1VswB3R4DO"
   },
   "source": [
    "## 2. Dataframe Methods for 'Publications' queries\n",
    "\n",
    "What follows are specialized versions of the `as_dataframe` method for results sets composed of publication records. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "j75inlUMR4DO"
   },
   "source": [
    "###  Extracting authors: `as_dataframe_authors`\n",
    "\n",
    "Publications authors are usually returned by the Dimensions API inside a nested JSON object in the `authors_affiliations` sub-key. \n",
    "\n",
    "> Note: the order of authors in the JSON is consistent with the ordering of authors in the original publication\n",
    "\n",
    "This methods allows to quickly extract that data and return a dataframe with **one row per author**."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 1000
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 940,
     "status": "ok",
     "timestamp": 1574681159951,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "0_KbE4ylR4DP",
    "outputId": "d5ad1426-b64b-4b64-d76f-6c1fb05348d7"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>first_name</th>\n",
       "      <th>last_name</th>\n",
       "      <th>corresponding</th>\n",
       "      <th>orcid</th>\n",
       "      <th>current_organization_id</th>\n",
       "      <th>researcher_id</th>\n",
       "      <th>affiliations</th>\n",
       "      <th>pub_id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Manish</td>\n",
       "      <td>Chhowalla</td>\n",
       "      <td>True</td>\n",
       "      <td></td>\n",
       "      <td>grid.430387.b</td>\n",
       "      <td>ur.0633062306.03</td>\n",
       "      <td>[{'id': 'grid.430387.b', 'name': 'Rutgers, The...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Hyeon Suk</td>\n",
       "      <td>Shin</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>grid.42687.3f</td>\n",
       "      <td>ur.07617630407.83</td>\n",
       "      <td>[{'id': 'grid.42687.3f', 'name': 'Ulsan Nation...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Goki</td>\n",
       "      <td>Eda</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>grid.4280.e</td>\n",
       "      <td>ur.01150450507.27</td>\n",
       "      <td>[{'id': 'grid.4280.e', 'name': 'National Unive...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Lain-Jong</td>\n",
       "      <td>Li</td>\n",
       "      <td></td>\n",
       "      <td>['0000-0002-4059-7783']</td>\n",
       "      <td>grid.45672.32</td>\n",
       "      <td>ur.01313340113.13</td>\n",
       "      <td>[{'id': 'grid.28665.3f', 'name': 'Academia Sin...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Kian Ping</td>\n",
       "      <td>Loh</td>\n",
       "      <td></td>\n",
       "      <td>['0000-0002-1491-743X']</td>\n",
       "      <td>grid.4280.e</td>\n",
       "      <td>ur.0752174033.73</td>\n",
       "      <td>[{'id': 'grid.4280.e', 'name': 'National Unive...</td>\n",
       "      <td>pub.1050119463</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  first_name  last_name corresponding                    orcid  \\\n",
       "0     Manish  Chhowalla          True                            \n",
       "1  Hyeon Suk       Shin                                          \n",
       "2       Goki        Eda                                          \n",
       "3  Lain-Jong         Li                ['0000-0002-4059-7783']   \n",
       "4  Kian Ping        Loh                ['0000-0002-1491-743X']   \n",
       "\n",
       "  current_organization_id      researcher_id  \\\n",
       "0           grid.430387.b   ur.0633062306.03   \n",
       "1           grid.42687.3f  ur.07617630407.83   \n",
       "2             grid.4280.e  ur.01150450507.27   \n",
       "3           grid.45672.32  ur.01313340113.13   \n",
       "4             grid.4280.e   ur.0752174033.73   \n",
       "\n",
       "                                        affiliations          pub_id  \n",
       "0  [{'id': 'grid.430387.b', 'name': 'Rutgers, The...  pub.1050119463  \n",
       "1  [{'id': 'grid.42687.3f', 'name': 'Ulsan Nation...  pub.1050119463  \n",
       "2  [{'id': 'grid.4280.e', 'name': 'National Unive...  pub.1050119463  \n",
       "3  [{'id': 'grid.28665.3f', 'name': 'Academia Sin...  pub.1050119463  \n",
       "4  [{'id': 'grid.4280.e', 'name': 'National Unive...  pub.1050119463  "
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "authors = res.as_dataframe_authors()\n",
    "authors.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "N1VtHVQbR4DQ"
   },
   "source": [
    "Using the authors dataframe, we can easily get the top ten values for `current_organization_id`. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 204
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1031,
     "status": "ok",
     "timestamp": 1574681165815,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "ut6y8Di0R4DR",
    "outputId": "3a56a8d3-f5e2-463e-b367-e53f1f9d70b1"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "                 188\n",
       "grid.59025.3b    144\n",
       "grid.12527.33    116\n",
       "grid.5379.8      105\n",
       "grid.59053.3a     85\n",
       "grid.19006.3e     78\n",
       "grid.168010.e     76\n",
       "grid.13402.34     72\n",
       "grid.21940.3e     69\n",
       "grid.116068.8     65\n",
       "Name: current_organization_id, dtype: int64"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "authors['current_organization_id'].value_counts()[:10]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "6NpFRYBGR4DS"
   },
   "source": [
    "> Explanation: the most frequent value turns to be grid.59025.3b ie [Nanyang Technological University in Singapore](https://www.grid.ac/institutes/grid.59025.3b). The first result is empty, meaning that for those authors Dimensions has no info about `current_organization_id`. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "p2eN2Y8GR4DT"
   },
   "source": [
    "### Extracting Affiliations: `as_dataframe_authors_affiliations`\n",
    "\n",
    "As you can see from the results of the previous section, the `affiliations` of each author is yet another nested JSON object. \n",
    "\n",
    "> Note: the order of affiliations in the JSON is consistent with the affiliations order in the original publication\n",
    "\n",
    "The `as_dataframe_authors_affiliations` method allows to quickly extract that affiliations data and return a dataframe with **one row per affiliation**.\n",
    "\n",
    "This can be useful e.g. if one wants to count research organizations at *the time of writing* (as opposed to `current_organization_id`, which is the *most recent organization* of a researcher). "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 464
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1544,
     "status": "ok",
     "timestamp": 1574681203066,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "fszvKPHdR4DT",
    "outputId": "704b1027-ff46-4417-e3d5-4c5f5e2c20f7"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>aff_id</th>\n",
       "      <th>aff_name</th>\n",
       "      <th>aff_city</th>\n",
       "      <th>aff_city_id</th>\n",
       "      <th>aff_country</th>\n",
       "      <th>aff_country_code</th>\n",
       "      <th>aff_state</th>\n",
       "      <th>aff_state_code</th>\n",
       "      <th>pub_id</th>\n",
       "      <th>researcher_id</th>\n",
       "      <th>first_name</th>\n",
       "      <th>last_name</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>grid.430387.b</td>\n",
       "      <td>Rutgers, The State University of New Jersey</td>\n",
       "      <td>New Brunswick</td>\n",
       "      <td>5.10172e+06</td>\n",
       "      <td>United States</td>\n",
       "      <td>US</td>\n",
       "      <td>New Jersey</td>\n",
       "      <td>US-NJ</td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>ur.0633062306.03</td>\n",
       "      <td>Manish</td>\n",
       "      <td>Chhowalla</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>grid.42687.3f</td>\n",
       "      <td>Ulsan National Institute of Science and Techno...</td>\n",
       "      <td>Ulsan</td>\n",
       "      <td>1.83375e+06</td>\n",
       "      <td>South Korea</td>\n",
       "      <td>KR</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>ur.07617630407.83</td>\n",
       "      <td>Hyeon Suk</td>\n",
       "      <td>Shin</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>grid.4280.e</td>\n",
       "      <td>National University of Singapore</td>\n",
       "      <td>Singapore</td>\n",
       "      <td>1.88025e+06</td>\n",
       "      <td>Singapore</td>\n",
       "      <td>SG</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>ur.01150450507.27</td>\n",
       "      <td>Goki</td>\n",
       "      <td>Eda</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>grid.28665.3f</td>\n",
       "      <td>Academia Sinica</td>\n",
       "      <td>Taipei</td>\n",
       "      <td>1.66834e+06</td>\n",
       "      <td>Taiwan</td>\n",
       "      <td>TW</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>ur.01313340113.13</td>\n",
       "      <td>Lain-Jong</td>\n",
       "      <td>Li</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>grid.4280.e</td>\n",
       "      <td>National University of Singapore</td>\n",
       "      <td>Singapore</td>\n",
       "      <td>1.88025e+06</td>\n",
       "      <td>Singapore</td>\n",
       "      <td>SG</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>pub.1050119463</td>\n",
       "      <td>ur.0752174033.73</td>\n",
       "      <td>Kian Ping</td>\n",
       "      <td>Loh</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "          aff_id                                           aff_name  \\\n",
       "0  grid.430387.b        Rutgers, The State University of New Jersey   \n",
       "1  grid.42687.3f  Ulsan National Institute of Science and Techno...   \n",
       "2    grid.4280.e                   National University of Singapore   \n",
       "3  grid.28665.3f                                    Academia Sinica   \n",
       "4    grid.4280.e                   National University of Singapore   \n",
       "\n",
       "        aff_city  aff_city_id    aff_country aff_country_code   aff_state  \\\n",
       "0  New Brunswick  5.10172e+06  United States               US  New Jersey   \n",
       "1          Ulsan  1.83375e+06    South Korea               KR               \n",
       "2      Singapore  1.88025e+06      Singapore               SG               \n",
       "3         Taipei  1.66834e+06         Taiwan               TW               \n",
       "4      Singapore  1.88025e+06      Singapore               SG               \n",
       "\n",
       "  aff_state_code          pub_id      researcher_id first_name  last_name  \n",
       "0          US-NJ  pub.1050119463   ur.0633062306.03     Manish  Chhowalla  \n",
       "1                 pub.1050119463  ur.07617630407.83  Hyeon Suk       Shin  \n",
       "2                 pub.1050119463  ur.01150450507.27       Goki        Eda  \n",
       "3                 pub.1050119463  ur.01313340113.13  Lain-Jong         Li  \n",
       "4                 pub.1050119463   ur.0752174033.73  Kian Ping        Loh  "
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "affiliations = res.as_dataframe_authors_affiliations()\n",
    "affiliations.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 219
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 797,
     "status": "ok",
     "timestamp": 1574681207520,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "Ci5OzQyJR4DV",
    "outputId": "35131ce4-d325-4d49-87a3-087198f0fb72"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>aff_id</th>\n",
       "      <th>aff_name</th>\n",
       "      <th>aff_city</th>\n",
       "      <th>aff_city_id</th>\n",
       "      <th>aff_country</th>\n",
       "      <th>aff_country_code</th>\n",
       "      <th>aff_state</th>\n",
       "      <th>aff_state_code</th>\n",
       "      <th>pub_id</th>\n",
       "      <th>researcher_id</th>\n",
       "      <th>first_name</th>\n",
       "      <th>last_name</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "      <td>6999</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>unique</th>\n",
       "      <td>750</td>\n",
       "      <td>1061</td>\n",
       "      <td>460</td>\n",
       "      <td>463</td>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "      <td>56</td>\n",
       "      <td>56</td>\n",
       "      <td>984</td>\n",
       "      <td>4159</td>\n",
       "      <td>3415</td>\n",
       "      <td>1891</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>top</th>\n",
       "      <td></td>\n",
       "      <td>Nanyang Technological University</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>China</td>\n",
       "      <td>CN</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>pub.1019661721</td>\n",
       "      <td></td>\n",
       "      <td>Wei</td>\n",
       "      <td>Zhang</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>freq</th>\n",
       "      <td>925</td>\n",
       "      <td>220</td>\n",
       "      <td>925</td>\n",
       "      <td>930</td>\n",
       "      <td>1972</td>\n",
       "      <td>1972</td>\n",
       "      <td>5120</td>\n",
       "      <td>5120</td>\n",
       "      <td>105</td>\n",
       "      <td>159</td>\n",
       "      <td>62</td>\n",
       "      <td>294</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       aff_id                          aff_name aff_city aff_city_id  \\\n",
       "count    6999                              6999     6999        6999   \n",
       "unique    750                              1061      460         463   \n",
       "top            Nanyang Technological University                        \n",
       "freq      925                               220      925         930   \n",
       "\n",
       "       aff_country aff_country_code aff_state aff_state_code          pub_id  \\\n",
       "count         6999             6999      6999           6999            6999   \n",
       "unique          53               53        56             56             984   \n",
       "top          China               CN                           pub.1019661721   \n",
       "freq          1972             1972      5120           5120             105   \n",
       "\n",
       "       researcher_id first_name last_name  \n",
       "count           6999       6999      6999  \n",
       "unique          4159       3415      1891  \n",
       "top                         Wei     Zhang  \n",
       "freq             159         62       294  "
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "affiliations.describe(include=\"all\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "at7DTaU5R4DW"
   },
   "source": [
    "Let's get the top ten values for `aff_id`. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 204
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 877,
     "status": "ok",
     "timestamp": 1574681214999,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "o2zUnRg0R4DX",
    "outputId": "d777c549-679c-4623-8cb0-866ec0b4bc4b"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "                 925\n",
       "grid.59025.3b    220\n",
       "grid.12527.33    134\n",
       "grid.5379.8      115\n",
       "grid.19006.3e    100\n",
       "grid.168010.e    100\n",
       "grid.21940.3e     96\n",
       "grid.59053.3a     91\n",
       "grid.21729.3f     87\n",
       "grid.116068.8     86\n",
       "Name: aff_id, dtype: int64"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "affiliations['aff_id'].value_counts()[:10]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "aPQNuTpuR4DY"
   },
   "source": [
    "> Explanation: the most frequent value is still [grid.59025.3b](https://www.grid.ac/institutes/grid.59025.3b), meaning that most authors' current organization is the same organization of when they published these articles. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "Zmv0M_PkR4DZ"
   },
   "source": [
    "Another example: we can now easily analyze the data by country too. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 204
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 1021,
     "status": "ok",
     "timestamp": 1574681222068,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "OnmvjI-8R4DZ",
    "outputId": "d596422c-961f-471f-9cb4-289fc066cb71"
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "China             1972\n",
       "United States     1570\n",
       "                   925\n",
       "South Korea        342\n",
       "Singapore          327\n",
       "United Kingdom     312\n",
       "Australia          171\n",
       "Japan              158\n",
       "Canada             138\n",
       "Germany            126\n",
       "Name: aff_country, dtype: int64"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "affiliations['aff_country'].value_counts()[:10]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "a83GEMfQR4Db"
   },
   "source": [
    "> Explanation: the vast majority of authors in this dataset are from China, closely followed by the USA. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "69JItbFgR4Db"
   },
   "source": [
    "## 3. Dataframe Methods for 'Grants' queries"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "true",
    "colab_type": "text",
    "id": "P0FLXthRR4Dc"
   },
   "source": [
    "###  Extracting Funders: `as_dataframe_funders`\n",
    "\n",
    "Grant funders authors are usually returned by the Dimensions API inside a nested JSON object in the `funders` sub-key. \n",
    "\n",
    "This methods allows to quickly extract that data and return a dataframe with **one row per funder**."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 34
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 3344,
     "status": "ok",
     "timestamp": 1574681269386,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "kjxgoy_VR4Dc",
    "outputId": "59ee9e43-ed66-4e6f-ee5e-7e81e5f9d515"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Grants: 1000 (total = 9204)\n"
     ]
    }
   ],
   "source": [
    "# get a sample list of grants\n",
    "query = \"\"\"search grants for \"malaria\" return grants limit 1000\"\"\"\n",
    "res = dsl.query(query)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 1000
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 736,
     "status": "ok",
     "timestamp": 1574681271845,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "56iPhGTUR4Dd",
    "outputId": "c94bba81-caf4-4f7b-e85b-e8969e4c8b6a"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>id</th>\n",
       "      <th>city_name</th>\n",
       "      <th>types</th>\n",
       "      <th>acronym</th>\n",
       "      <th>state_name</th>\n",
       "      <th>latitude</th>\n",
       "      <th>name</th>\n",
       "      <th>country_name</th>\n",
       "      <th>linkout</th>\n",
       "      <th>longitude</th>\n",
       "      <th>grant_id</th>\n",
       "      <th>grant_title</th>\n",
       "      <th>grant_start_date</th>\n",
       "      <th>grant_end_date</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>grid.421091.f</td>\n",
       "      <td>Swindon</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>EPSRC</td>\n",
       "      <td>England</td>\n",
       "      <td>51.567093</td>\n",
       "      <td>Engineering and Physical Sciences Research Cou...</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>[https://www.epsrc.ac.uk/]</td>\n",
       "      <td>-1.784602</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>grid.270680.b</td>\n",
       "      <td>Brussels</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>EC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>50.851650</td>\n",
       "      <td>European Commission</td>\n",
       "      <td>Belgium</td>\n",
       "      <td>[http://ec.europa.eu/index_en.htm]</td>\n",
       "      <td>4.363670</td>\n",
       "      <td>grant.8585457</td>\n",
       "      <td>Estimating the Prevalence of AntiMicrobial Res...</td>\n",
       "      <td>2020-01-01</td>\n",
       "      <td>2021-12-31</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>grid.270680.b</td>\n",
       "      <td>Brussels</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>EC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>50.851650</td>\n",
       "      <td>European Commission</td>\n",
       "      <td>Belgium</td>\n",
       "      <td>[http://ec.europa.eu/index_en.htm]</td>\n",
       "      <td>4.363670</td>\n",
       "      <td>grant.8586121</td>\n",
       "      <td>Earth observation service for preventive contr...</td>\n",
       "      <td>2019-11-01</td>\n",
       "      <td>2022-10-31</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>grid.454774.1</td>\n",
       "      <td>New Delhi</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>DBT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>28.601473</td>\n",
       "      <td>Department of Biotechnology</td>\n",
       "      <td>India</td>\n",
       "      <td>[http://www.dbtindia.nic.in/]</td>\n",
       "      <td>77.235780</td>\n",
       "      <td>grant.8657420</td>\n",
       "      <td>Translational research and clinical developmen...</td>\n",
       "      <td>2019-10-07</td>\n",
       "      <td>2022-10-07</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>grid.248883.d</td>\n",
       "      <td>Ottawa</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>CIHR</td>\n",
       "      <td>Ontario</td>\n",
       "      <td>45.381893</td>\n",
       "      <td>Canadian Institutes of Health Research</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[http://www.cihr-irsc.gc.ca/e/193.html]</td>\n",
       "      <td>-75.745224</td>\n",
       "      <td>grant.8527034</td>\n",
       "      <td>Mechanisms of Leishmania dissemination and tra...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2024-09-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>grid.52788.30</td>\n",
       "      <td>London</td>\n",
       "      <td>[Nonprofit]</td>\n",
       "      <td>WT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>51.525867</td>\n",
       "      <td>Wellcome Trust</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>[http://www.wellcome.ac.uk/]</td>\n",
       "      <td>-0.135005</td>\n",
       "      <td>grant.8558648</td>\n",
       "      <td>Molecular mechanisms of carbohydrate uptake in...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2022-09-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>grid.52788.30</td>\n",
       "      <td>London</td>\n",
       "      <td>[Nonprofit]</td>\n",
       "      <td>WT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>51.525867</td>\n",
       "      <td>Wellcome Trust</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>[http://www.wellcome.ac.uk/]</td>\n",
       "      <td>-0.135005</td>\n",
       "      <td>grant.8103743</td>\n",
       "      <td>The Chemical Empire: A New History of Syntheti...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2023-10-01</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>grid.425888.b</td>\n",
       "      <td>Bern</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>SNF</td>\n",
       "      <td>NaN</td>\n",
       "      <td>46.949230</td>\n",
       "      <td>Swiss National Science Foundation</td>\n",
       "      <td>Switzerland</td>\n",
       "      <td>[http://www.snf.ch/en]</td>\n",
       "      <td>7.432395</td>\n",
       "      <td>grant.8599112</td>\n",
       "      <td>Gauging Global Governance: The Effectiveness o...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2022-09-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>grid.270680.b</td>\n",
       "      <td>Brussels</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>EC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>50.851650</td>\n",
       "      <td>European Commission</td>\n",
       "      <td>Belgium</td>\n",
       "      <td>[http://ec.europa.eu/index_en.htm]</td>\n",
       "      <td>4.363670</td>\n",
       "      <td>grant.8585082</td>\n",
       "      <td>Understanding the roles of pathogen infection ...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2021-09-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>grid.457875.c</td>\n",
       "      <td>Arlington</td>\n",
       "      <td>[Government]</td>\n",
       "      <td>NSF MPS</td>\n",
       "      <td>Virginia</td>\n",
       "      <td>38.880566</td>\n",
       "      <td>Directorate for Mathematical &amp; Physical Sciences</td>\n",
       "      <td>United States</td>\n",
       "      <td>[http://www.nsf.gov/dir/index.jsp?org=MPS]</td>\n",
       "      <td>-77.110990</td>\n",
       "      <td>grant.8566624</td>\n",
       "      <td>Collaborative Research: Principal Component An...</td>\n",
       "      <td>2019-10-01</td>\n",
       "      <td>2022-09-30</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "              id  city_name         types  acronym state_name   latitude  \\\n",
       "0  grid.421091.f    Swindon  [Government]    EPSRC    England  51.567093   \n",
       "1  grid.270680.b   Brussels  [Government]       EC        NaN  50.851650   \n",
       "2  grid.270680.b   Brussels  [Government]       EC        NaN  50.851650   \n",
       "3  grid.454774.1  New Delhi  [Government]      DBT        NaN  28.601473   \n",
       "4  grid.248883.d     Ottawa  [Government]     CIHR    Ontario  45.381893   \n",
       "5  grid.52788.30     London   [Nonprofit]       WT        NaN  51.525867   \n",
       "6  grid.52788.30     London   [Nonprofit]       WT        NaN  51.525867   \n",
       "7  grid.425888.b       Bern  [Government]      SNF        NaN  46.949230   \n",
       "8  grid.270680.b   Brussels  [Government]       EC        NaN  50.851650   \n",
       "9  grid.457875.c  Arlington  [Government]  NSF MPS   Virginia  38.880566   \n",
       "\n",
       "                                                name    country_name  \\\n",
       "0  Engineering and Physical Sciences Research Cou...  United Kingdom   \n",
       "1                                European Commission         Belgium   \n",
       "2                                European Commission         Belgium   \n",
       "3                        Department of Biotechnology           India   \n",
       "4             Canadian Institutes of Health Research          Canada   \n",
       "5                                     Wellcome Trust  United Kingdom   \n",
       "6                                     Wellcome Trust  United Kingdom   \n",
       "7                  Swiss National Science Foundation     Switzerland   \n",
       "8                                European Commission         Belgium   \n",
       "9   Directorate for Mathematical & Physical Sciences   United States   \n",
       "\n",
       "                                      linkout  longitude       grant_id  \\\n",
       "0                  [https://www.epsrc.ac.uk/]  -1.784602  grant.8558055   \n",
       "1          [http://ec.europa.eu/index_en.htm]   4.363670  grant.8585457   \n",
       "2          [http://ec.europa.eu/index_en.htm]   4.363670  grant.8586121   \n",
       "3               [http://www.dbtindia.nic.in/]  77.235780  grant.8657420   \n",
       "4     [http://www.cihr-irsc.gc.ca/e/193.html] -75.745224  grant.8527034   \n",
       "5                [http://www.wellcome.ac.uk/]  -0.135005  grant.8558648   \n",
       "6                [http://www.wellcome.ac.uk/]  -0.135005  grant.8103743   \n",
       "7                      [http://www.snf.ch/en]   7.432395  grant.8599112   \n",
       "8          [http://ec.europa.eu/index_en.htm]   4.363670  grant.8585082   \n",
       "9  [http://www.nsf.gov/dir/index.jsp?org=MPS] -77.110990  grant.8566624   \n",
       "\n",
       "                                         grant_title grant_start_date  \\\n",
       "0  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "1  Estimating the Prevalence of AntiMicrobial Res...       2020-01-01   \n",
       "2  Earth observation service for preventive contr...       2019-11-01   \n",
       "3  Translational research and clinical developmen...       2019-10-07   \n",
       "4  Mechanisms of Leishmania dissemination and tra...       2019-10-01   \n",
       "5  Molecular mechanisms of carbohydrate uptake in...       2019-10-01   \n",
       "6  The Chemical Empire: A New History of Syntheti...       2019-10-01   \n",
       "7  Gauging Global Governance: The Effectiveness o...       2019-10-01   \n",
       "8  Understanding the roles of pathogen infection ...       2019-10-01   \n",
       "9  Collaborative Research: Principal Component An...       2019-10-01   \n",
       "\n",
       "  grant_end_date  \n",
       "0     2021-03-30  \n",
       "1     2021-12-31  \n",
       "2     2022-10-31  \n",
       "3     2022-10-07  \n",
       "4     2024-09-30  \n",
       "5     2022-09-30  \n",
       "6     2023-10-01  \n",
       "7     2022-09-30  \n",
       "8     2021-09-30  \n",
       "9     2022-09-30  "
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "res.as_dataframe_funders().head(10)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "true",
    "colab_type": "text",
    "id": "UqanXsrmR4Df"
   },
   "source": [
    "### Extracting investigators: `as_dataframe_investigators`\n",
    "\n",
    "Grant investigators are usually returned by the Dimensions API inside a nested JSON object in the `investigator_details` sub-key. \n",
    "\n",
    "This methods allows to quickly extract that data and return a dataframe with **one row per investigator**.\n",
    "\n",
    "> NOTE: `investigator_details` are not returned by default in a grants query hence one must specify this in the query results"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 88
    },
    "colab_type": "code",
    "executionInfo": {
     "elapsed": 3591,
     "status": "ok",
     "timestamp": 1574681293076,
     "user": {
      "displayName": "Michele Pasin",
      "photoUrl": "https://lh3.googleusercontent.com/a-/AAuE7mBu8LVjIGgontF2Wax51BoL5KFx8esezX3bUmaa0g=s64",
      "userId": "10309320684375994511"
     },
     "user_tz": 0
    },
    "id": "QZS6TePGR4Df",
    "outputId": "aae7e731-18a0-488f-b65f-111dfab61b8b"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Grants: 1000 (total = 9204)\n",
      "WARNINGS [1]\n",
      "Field 'project_num' is deprecated in favor of grant_number. Please refer to https://docs.dimensions.ai/dsl/releasenotes.html for more details\n"
     ]
    }
   ],
   "source": [
    "# get a sample list of grants\n",
    "query = \"\"\"search grants for \"malaria\" return grants[basics+investigator_details] limit 1000\"\"\"\n",
    "res = dsl.query(query)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>first_name</th>\n",
       "      <th>last_name</th>\n",
       "      <th>middle_name</th>\n",
       "      <th>id</th>\n",
       "      <th>role</th>\n",
       "      <th>affiliations</th>\n",
       "      <th>grant_id</th>\n",
       "      <th>grant_title</th>\n",
       "      <th>grant_start_date</th>\n",
       "      <th>grant_end_date</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Anotida</td>\n",
       "      <td>Madzvamuse</td>\n",
       "      <td></td>\n",
       "      <td>ur.01301306304.17</td>\n",
       "      <td>PI</td>\n",
       "      <td>[{'country': 'United Kingdom', 'state_code': N...</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Gift</td>\n",
       "      <td>Muchatibaya</td>\n",
       "      <td></td>\n",
       "      <td>ur.01125437006.53</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Farai</td>\n",
       "      <td>Nyabadza</td>\n",
       "      <td></td>\n",
       "      <td>ur.016431672433.40</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>[{'country': 'South Africa', 'state_code': Non...</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Zindoga</td>\n",
       "      <td>Mukandavire</td>\n",
       "      <td></td>\n",
       "      <td>ur.01176116461.04</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Jasmina</td>\n",
       "      <td>Panovska-Griffiths</td>\n",
       "      <td></td>\n",
       "      <td>ur.01037661532.12</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Edward</td>\n",
       "      <td>Lungu</td>\n",
       "      <td></td>\n",
       "      <td>ur.0644520733.99</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Hatson John Boscoh</td>\n",
       "      <td>Njagarah</td>\n",
       "      <td></td>\n",
       "      <td>ur.010541731643.13</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Eduard</td>\n",
       "      <td>Campillo Funollet</td>\n",
       "      <td></td>\n",
       "      <td>ur.014162252725.80</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>[{'country': 'United Kingdom', 'state_code': N...</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>K</td>\n",
       "      <td>White</td>\n",
       "      <td></td>\n",
       "      <td>ur.015153160033.34</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>NaN</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Istvan</td>\n",
       "      <td>Kiss</td>\n",
       "      <td>Zoltan</td>\n",
       "      <td>ur.016546121033.78</td>\n",
       "      <td>Co-PI</td>\n",
       "      <td>[{'country': 'United Kingdom', 'state_code': N...</td>\n",
       "      <td>grant.8558055</td>\n",
       "      <td>UK-Africa Postgraduate Advanced Study Institut...</td>\n",
       "      <td>2020-03-31</td>\n",
       "      <td>2021-03-30</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           first_name           last_name middle_name                  id  \\\n",
       "0             Anotida          Madzvamuse               ur.01301306304.17   \n",
       "1                Gift         Muchatibaya               ur.01125437006.53   \n",
       "2               Farai            Nyabadza              ur.016431672433.40   \n",
       "3             Zindoga         Mukandavire               ur.01176116461.04   \n",
       "4             Jasmina  Panovska-Griffiths               ur.01037661532.12   \n",
       "5              Edward               Lungu                ur.0644520733.99   \n",
       "6  Hatson John Boscoh            Njagarah              ur.010541731643.13   \n",
       "7              Eduard   Campillo Funollet              ur.014162252725.80   \n",
       "8                   K               White              ur.015153160033.34   \n",
       "9              Istvan                Kiss      Zoltan  ur.016546121033.78   \n",
       "\n",
       "    role                                       affiliations       grant_id  \\\n",
       "0     PI  [{'country': 'United Kingdom', 'state_code': N...  grant.8558055   \n",
       "1  Co-PI                                                NaN  grant.8558055   \n",
       "2  Co-PI  [{'country': 'South Africa', 'state_code': Non...  grant.8558055   \n",
       "3  Co-PI                                                NaN  grant.8558055   \n",
       "4  Co-PI                                                NaN  grant.8558055   \n",
       "5  Co-PI                                                NaN  grant.8558055   \n",
       "6  Co-PI                                                NaN  grant.8558055   \n",
       "7  Co-PI  [{'country': 'United Kingdom', 'state_code': N...  grant.8558055   \n",
       "8  Co-PI                                                NaN  grant.8558055   \n",
       "9  Co-PI  [{'country': 'United Kingdom', 'state_code': N...  grant.8558055   \n",
       "\n",
       "                                         grant_title grant_start_date  \\\n",
       "0  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "1  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "2  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "3  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "4  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "5  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "6  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "7  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "8  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "9  UK-Africa Postgraduate Advanced Study Institut...       2020-03-31   \n",
       "\n",
       "  grant_end_date  \n",
       "0     2021-03-30  \n",
       "1     2021-03-30  \n",
       "2     2021-03-30  \n",
       "3     2021-03-30  \n",
       "4     2021-03-30  \n",
       "5     2021-03-30  \n",
       "6     2021-03-30  \n",
       "7     2021-03-30  \n",
       "8     2021-03-30  \n",
       "9     2021-03-30  "
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "res.as_dataframe_investigators().head(10)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "p2eN2Y8GR4DT"
   },
   "source": [
    "## 4. Dataframe Methods for 'Concepts' queries\n",
    "\n",
    "These methods can be used with all content types that support the extraction of concepts, e.g. `publications` or `grants`. See the official documentation for more details."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "p2eN2Y8GR4DT"
   },
   "source": [
    "### Extracting Concepts: `as_dataframe_concepts`\n",
    "\n",
    "The `as_dataframe_concepts` method allows to quickly extract all concepts attached to a record, **one row per concept**, so to make it easier to do operations like counting or plotting the results.\n",
    "\n",
    "NOTE: concepts are normalized keywords describing the main topics of a publication (or grant), which are automatically derived from the full text  using machine learning. In the JSON data, concepts are returned with an ordered list (=first items are the most relevant), like this one: \n",
    "\n",
    "```\n",
    "{'concepts': ['electrochemical conversion',\n",
    "  'conversion',\n",
    "  'CO2',\n",
    "  'formate',\n",
    "  'formic acid',\n",
    "  'acid'],\n",
    " 'id': 'pub.1122072646'}\n",
    "```\n",
    "\n",
    "The `as_dataframe_concepts` extracts all concepts data from JSON to a dataframe. Moreover, it calculates three figures that can be handy in order to carry out further analyses:\n",
    "\n",
    "1. `position`: an integer representing the position of the concept within the list for a single document, in absolute terms. E.g., the first concept has position=1, while the fifth has position=5.\n",
    "2. `score`: an integer representing the relevance of the concept, normalized against the total number of concepts for a single document (eg publication or gant). So if a document has 10 concepts in total, the first concept gets a score=1, the second score=0.9, etc..\n",
    "3. `frequency`: an integer representing how often that concept occurs within the full set of documents returned by your query, i.e. how many documents have that concept. So if a concept appears in 5 documents, frequency=5. \n",
    "\n",
    "By sorting and segmenting concepts using these three parameters, it is possible to fine-tune the concept extraction algorithm, so to make more suitable for the application at hand."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 100 (total = 99197)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>position</th>\n",
       "      <th>score</th>\n",
       "      <th>frequency</th>\n",
       "      <th>pubid</th>\n",
       "      <th>title</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>graphene oxide synthesis</td>\n",
       "      <td>1</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>synthesis</td>\n",
       "      <td>2</td>\n",
       "      <td>0.8</td>\n",
       "      <td>10</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>facile method</td>\n",
       "      <td>3</td>\n",
       "      <td>0.6</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>method</td>\n",
       "      <td>4</td>\n",
       "      <td>0.4</td>\n",
       "      <td>25</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>characterization</td>\n",
       "      <td>5</td>\n",
       "      <td>0.2</td>\n",
       "      <td>4</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                       name  position  score  frequency           pubid  \\\n",
       "0  graphene oxide synthesis         1    1.0          1  pub.1120445400   \n",
       "1                 synthesis         2    0.8         10  pub.1120445400   \n",
       "2             facile method         3    0.6          1  pub.1120445400   \n",
       "3                    method         4    0.4         25  pub.1120445400   \n",
       "4          characterization         5    0.2          4  pub.1120445400   \n",
       "\n",
       "                                               title  year  \n",
       "0  Graphene oxide synthesis by facile method and ...  2019  \n",
       "1  Graphene oxide synthesis by facile method and ...  2019  \n",
       "2  Graphene oxide synthesis by facile method and ...  2019  \n",
       "3  Graphene oxide synthesis by facile method and ...  2019  \n",
       "4  Graphene oxide synthesis by facile method and ...  2019  "
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "q = \"\"\"search publications for \"graphene\" \n",
    "            where year=2019 \n",
    "       return publications[id+title+year+concepts] limit 100\"\"\"\n",
    "concepts = dsl.query(q).as_dataframe_concepts()\n",
    "concepts.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Int64Index: 3975 entries, 0 to 53\n",
      "Data columns (total 7 columns):\n",
      "name         3975 non-null object\n",
      "position     3975 non-null int64\n",
      "score        3975 non-null float64\n",
      "frequency    3975 non-null int64\n",
      "pubid        3975 non-null object\n",
      "title        3975 non-null object\n",
      "year         3975 non-null object\n",
      "dtypes: float64(1), int64(2), object(4)\n",
      "memory usage: 248.4+ KB\n"
     ]
    }
   ],
   "source": [
    "concepts.info()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false"
   },
   "source": [
    "E.g. Sorting by **position** permits to highlight concepts that are important but don't appear in many documents."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>position</th>\n",
       "      <th>score</th>\n",
       "      <th>frequency</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>name</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>magnetohydrodynamic flow</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>porous polymers</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>global warming</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>fundamental mechanisms</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>hydrogen adsorption</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>friendly preparation</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>supercritical CO2</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>cuprous oxide nanoparticles</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>thin-film transistors</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>plasmonic photocatalytic reaction</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>one-dimensional graphene superlattices</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pyrite</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>carbon nitride</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>use of chitosan</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>nanofiber mats</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>formaldehyde</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>stretchable electronics</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mechanical energy</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>MXene</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>aptasensor</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>decolorization</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>operational characteristics</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>toxic metal ions</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>graphitic biochar</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>breast tissue engineering</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>significant research</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>tremendous development</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>graphene oxide synthesis</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>silicon carbide</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>study</th>\n",
       "      <td>1</td>\n",
       "      <td>1.00</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>time</th>\n",
       "      <td>245</td>\n",
       "      <td>5.96</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>size</th>\n",
       "      <td>247</td>\n",
       "      <td>3.54</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>content</th>\n",
       "      <td>252</td>\n",
       "      <td>3.31</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>synthesis</th>\n",
       "      <td>253</td>\n",
       "      <td>5.14</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>morphology</th>\n",
       "      <td>264</td>\n",
       "      <td>3.92</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>coatings</th>\n",
       "      <td>267</td>\n",
       "      <td>3.42</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>layer</th>\n",
       "      <td>287</td>\n",
       "      <td>7.12</td>\n",
       "      <td>144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>system</th>\n",
       "      <td>290</td>\n",
       "      <td>7.41</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>technique</th>\n",
       "      <td>291</td>\n",
       "      <td>7.24</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>microscopy</th>\n",
       "      <td>303</td>\n",
       "      <td>7.26</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>electron microscopy</th>\n",
       "      <td>304</td>\n",
       "      <td>6.28</td>\n",
       "      <td>144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>results</th>\n",
       "      <td>313</td>\n",
       "      <td>4.92</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>temperature</th>\n",
       "      <td>317</td>\n",
       "      <td>4.18</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>concentration</th>\n",
       "      <td>329</td>\n",
       "      <td>4.58</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>solution</th>\n",
       "      <td>345</td>\n",
       "      <td>6.77</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mechanism</th>\n",
       "      <td>347</td>\n",
       "      <td>4.19</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>potential</th>\n",
       "      <td>349</td>\n",
       "      <td>3.06</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>devices</th>\n",
       "      <td>397</td>\n",
       "      <td>6.23</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>stability</th>\n",
       "      <td>398</td>\n",
       "      <td>3.29</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>spectroscopy</th>\n",
       "      <td>400</td>\n",
       "      <td>7.38</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>process</th>\n",
       "      <td>408</td>\n",
       "      <td>7.99</td>\n",
       "      <td>256</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>surface</th>\n",
       "      <td>429</td>\n",
       "      <td>7.49</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>performance</th>\n",
       "      <td>435</td>\n",
       "      <td>8.04</td>\n",
       "      <td>289</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>method</th>\n",
       "      <td>463</td>\n",
       "      <td>14.32</td>\n",
       "      <td>625</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>structure</th>\n",
       "      <td>586</td>\n",
       "      <td>13.68</td>\n",
       "      <td>576</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>effects</th>\n",
       "      <td>601</td>\n",
       "      <td>12.82</td>\n",
       "      <td>625</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>addition</th>\n",
       "      <td>634</td>\n",
       "      <td>7.41</td>\n",
       "      <td>400</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>properties</th>\n",
       "      <td>651</td>\n",
       "      <td>23.78</td>\n",
       "      <td>1369</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>materials</th>\n",
       "      <td>768</td>\n",
       "      <td>21.95</td>\n",
       "      <td>1369</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>applications</th>\n",
       "      <td>949</td>\n",
       "      <td>13.56</td>\n",
       "      <td>1024</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2624 rows × 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        position  score  frequency\n",
       "name                                                              \n",
       "magnetohydrodynamic flow                       1   1.00          1\n",
       "porous polymers                                1   1.00          1\n",
       "global warming                                 1   1.00          1\n",
       "fundamental mechanisms                         1   1.00          1\n",
       "hydrogen adsorption                            1   1.00          1\n",
       "friendly preparation                           1   1.00          1\n",
       "supercritical CO2                              1   1.00          1\n",
       "cuprous oxide nanoparticles                    1   1.00          1\n",
       "thin-film transistors                          1   1.00          1\n",
       "plasmonic photocatalytic reaction              1   1.00          1\n",
       "one-dimensional graphene superlattices         1   1.00          1\n",
       "pyrite                                         1   1.00          1\n",
       "carbon nitride                                 1   1.00          1\n",
       "use of chitosan                                1   1.00          1\n",
       "nanofiber mats                                 1   1.00          1\n",
       "formaldehyde                                   1   1.00          1\n",
       "stretchable electronics                        1   1.00          1\n",
       "mechanical energy                              1   1.00          1\n",
       "MXene                                          1   1.00          1\n",
       "aptasensor                                     1   1.00          1\n",
       "decolorization                                 1   1.00          1\n",
       "operational characteristics                    1   1.00          1\n",
       "toxic metal ions                               1   1.00          1\n",
       "graphitic biochar                              1   1.00          1\n",
       "breast tissue engineering                      1   1.00          1\n",
       "significant research                           1   1.00          1\n",
       "tremendous development                         1   1.00          1\n",
       "graphene oxide synthesis                       1   1.00          1\n",
       "silicon carbide                                1   1.00          1\n",
       "study                                          1   1.00          1\n",
       "...                                          ...    ...        ...\n",
       "time                                         245   5.96        121\n",
       "size                                         247   3.54         64\n",
       "content                                      252   3.31         64\n",
       "synthesis                                    253   5.14        100\n",
       "morphology                                   264   3.92         81\n",
       "coatings                                     267   3.42         64\n",
       "layer                                        287   7.12        144\n",
       "system                                       290   7.41        196\n",
       "technique                                    291   7.24        169\n",
       "microscopy                                   303   7.26        169\n",
       "electron microscopy                          304   6.28        144\n",
       "results                                      313   4.92        121\n",
       "temperature                                  317   4.18        100\n",
       "concentration                                329   4.58        121\n",
       "solution                                     345   6.77        169\n",
       "mechanism                                    347   4.19        121\n",
       "potential                                    349   3.06         81\n",
       "devices                                      397   6.23        169\n",
       "stability                                    398   3.29        121\n",
       "spectroscopy                                 400   7.38        196\n",
       "process                                      408   7.99        256\n",
       "surface                                      429   7.49        196\n",
       "performance                                  435   8.04        289\n",
       "method                                       463  14.32        625\n",
       "structure                                    586  13.68        576\n",
       "effects                                      601  12.82        625\n",
       "addition                                     634   7.41        400\n",
       "properties                                   651  23.78       1369\n",
       "materials                                    768  21.95       1369\n",
       "applications                                 949  13.56       1024\n",
       "\n",
       "[2624 rows x 3 columns]"
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "concepts.groupby(\"name\").sum().sort_values(\"position\", ascending=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false"
   },
   "source": [
    "E.g. Sorting by **frequency** highlights concepts that are shared by many documents in our dataset (= the one generated by the original query)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>position</th>\n",
       "      <th>score</th>\n",
       "      <th>frequency</th>\n",
       "      <th>pubid</th>\n",
       "      <th>title</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>properties</td>\n",
       "      <td>11</td>\n",
       "      <td>0.71</td>\n",
       "      <td>37</td>\n",
       "      <td>pub.1112946271</td>\n",
       "      <td>Synthesis and modelling of the mechanical prop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>materials</td>\n",
       "      <td>8</td>\n",
       "      <td>0.79</td>\n",
       "      <td>37</td>\n",
       "      <td>pub.1112946271</td>\n",
       "      <td>Synthesis and modelling of the mechanical prop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>applications</td>\n",
       "      <td>18</td>\n",
       "      <td>0.11</td>\n",
       "      <td>32</td>\n",
       "      <td>pub.1122256034</td>\n",
       "      <td>The Surface of Polymers</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>method</td>\n",
       "      <td>4</td>\n",
       "      <td>0.40</td>\n",
       "      <td>25</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>effects</td>\n",
       "      <td>6</td>\n",
       "      <td>0.85</td>\n",
       "      <td>25</td>\n",
       "      <td>pub.1112946271</td>\n",
       "      <td>Synthesis and modelling of the mechanical prop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>structure</td>\n",
       "      <td>7</td>\n",
       "      <td>0.82</td>\n",
       "      <td>24</td>\n",
       "      <td>pub.1112946271</td>\n",
       "      <td>Synthesis and modelling of the mechanical prop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>addition</td>\n",
       "      <td>34</td>\n",
       "      <td>0.37</td>\n",
       "      <td>20</td>\n",
       "      <td>pub.1112218495</td>\n",
       "      <td>Simultaneously enhanced optical, electrical, a...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>46</th>\n",
       "      <td>performance</td>\n",
       "      <td>47</td>\n",
       "      <td>0.04</td>\n",
       "      <td>17</td>\n",
       "      <td>pub.1123780721</td>\n",
       "      <td>Synergetic Performance of Graphene Oxide and C...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>process</td>\n",
       "      <td>13</td>\n",
       "      <td>0.82</td>\n",
       "      <td>16</td>\n",
       "      <td>pub.1123754647</td>\n",
       "      <td>Nanolayer Film on Poly(Styrene/Ethylene Glycol...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>system</td>\n",
       "      <td>25</td>\n",
       "      <td>0.29</td>\n",
       "      <td>14</td>\n",
       "      <td>pub.1112946271</td>\n",
       "      <td>Synthesis and modelling of the mechanical prop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>composites</td>\n",
       "      <td>3</td>\n",
       "      <td>0.96</td>\n",
       "      <td>14</td>\n",
       "      <td>pub.1123780721</td>\n",
       "      <td>Synergetic Performance of Graphene Oxide and C...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>spectroscopy</td>\n",
       "      <td>34</td>\n",
       "      <td>0.49</td>\n",
       "      <td>14</td>\n",
       "      <td>pub.1123754647</td>\n",
       "      <td>Nanolayer Film on Poly(Styrene/Ethylene Glycol...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>surface</td>\n",
       "      <td>2</td>\n",
       "      <td>0.95</td>\n",
       "      <td>14</td>\n",
       "      <td>pub.1122256034</td>\n",
       "      <td>The Surface of Polymers</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>59</th>\n",
       "      <td>solution</td>\n",
       "      <td>60</td>\n",
       "      <td>0.09</td>\n",
       "      <td>13</td>\n",
       "      <td>pub.1123754647</td>\n",
       "      <td>Nanolayer Film on Poly(Styrene/Ethylene Glycol...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>microscopy</td>\n",
       "      <td>11</td>\n",
       "      <td>0.44</td>\n",
       "      <td>13</td>\n",
       "      <td>pub.1124068441</td>\n",
       "      <td>Photocatalytic Degradation of Organic Pollutan...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>technique</td>\n",
       "      <td>24</td>\n",
       "      <td>0.65</td>\n",
       "      <td>13</td>\n",
       "      <td>pub.1123754647</td>\n",
       "      <td>Nanolayer Film on Poly(Styrene/Ethylene Glycol...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>devices</td>\n",
       "      <td>16</td>\n",
       "      <td>0.74</td>\n",
       "      <td>13</td>\n",
       "      <td>pub.1123924946</td>\n",
       "      <td>Thermal Analysis and Operational Characteristi...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>layer</td>\n",
       "      <td>22</td>\n",
       "      <td>0.68</td>\n",
       "      <td>12</td>\n",
       "      <td>pub.1123754647</td>\n",
       "      <td>Nanolayer Film on Poly(Styrene/Ethylene Glycol...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>work</td>\n",
       "      <td>12</td>\n",
       "      <td>0.81</td>\n",
       "      <td>12</td>\n",
       "      <td>pub.1123747931</td>\n",
       "      <td>Porosity‐Engineering MXene as Supporting Mater...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>electron microscopy</td>\n",
       "      <td>10</td>\n",
       "      <td>0.50</td>\n",
       "      <td>12</td>\n",
       "      <td>pub.1124068441</td>\n",
       "      <td>Photocatalytic Degradation of Organic Pollutan...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>time</td>\n",
       "      <td>33</td>\n",
       "      <td>0.52</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1121960617</td>\n",
       "      <td>UV cross-linked polyvinylpyrrolidone electrosp...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>concentration</td>\n",
       "      <td>27</td>\n",
       "      <td>0.46</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1123678421</td>\n",
       "      <td>Removal of Formaldehyde from Aqueous Solution ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>results</td>\n",
       "      <td>6</td>\n",
       "      <td>0.82</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1123814693</td>\n",
       "      <td>Enhanced adsorption of sulfonamide antibiotics...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>mechanism</td>\n",
       "      <td>14</td>\n",
       "      <td>0.58</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1123769652</td>\n",
       "      <td>Indirect detection of 5-hydroxytryptamine and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>oxide</td>\n",
       "      <td>11</td>\n",
       "      <td>0.79</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1123780721</td>\n",
       "      <td>Synergetic Performance of Graphene Oxide and C...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>stability</td>\n",
       "      <td>36</td>\n",
       "      <td>0.33</td>\n",
       "      <td>11</td>\n",
       "      <td>pub.1112218495</td>\n",
       "      <td>Simultaneously enhanced optical, electrical, a...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>synthesis</td>\n",
       "      <td>2</td>\n",
       "      <td>0.80</td>\n",
       "      <td>10</td>\n",
       "      <td>pub.1120445400</td>\n",
       "      <td>Graphene oxide synthesis by facile method and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>temperature</td>\n",
       "      <td>31</td>\n",
       "      <td>0.47</td>\n",
       "      <td>10</td>\n",
       "      <td>pub.1123747931</td>\n",
       "      <td>Porosity‐Engineering MXene as Supporting Mater...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>conditions</td>\n",
       "      <td>15</td>\n",
       "      <td>0.55</td>\n",
       "      <td>10</td>\n",
       "      <td>pub.1123769652</td>\n",
       "      <td>Indirect detection of 5-hydroxytryptamine and ...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>polymers</td>\n",
       "      <td>6</td>\n",
       "      <td>0.74</td>\n",
       "      <td>10</td>\n",
       "      <td>pub.1122256034</td>\n",
       "      <td>The Surface of Polymers</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>reversible complex</td>\n",
       "      <td>6</td>\n",
       "      <td>0.79</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>complexes</td>\n",
       "      <td>7</td>\n",
       "      <td>0.75</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>polyols</td>\n",
       "      <td>8</td>\n",
       "      <td>0.71</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>sugars</td>\n",
       "      <td>9</td>\n",
       "      <td>0.67</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>diphenols</td>\n",
       "      <td>11</td>\n",
       "      <td>0.58</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>different magnitudes</td>\n",
       "      <td>18</td>\n",
       "      <td>0.60</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>unique chemistry</td>\n",
       "      <td>12</td>\n",
       "      <td>0.54</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>therapeutic applications</td>\n",
       "      <td>14</td>\n",
       "      <td>0.46</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>sialic acid</td>\n",
       "      <td>20</td>\n",
       "      <td>0.21</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124269456</td>\n",
       "      <td>Phenylboronic acid-decorated polymeric nanomat...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>significant advantages</td>\n",
       "      <td>2</td>\n",
       "      <td>0.98</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1122256646</td>\n",
       "      <td>Surface Modification of Polymer Substrates for...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>cheapness</td>\n",
       "      <td>4</td>\n",
       "      <td>0.94</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1122256646</td>\n",
       "      <td>Surface Modification of Polymer Substrates for...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>high flexibility</td>\n",
       "      <td>5</td>\n",
       "      <td>0.92</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1122256646</td>\n",
       "      <td>Surface Modification of Polymer Substrates for...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>42</th>\n",
       "      <td>adhesion properties</td>\n",
       "      <td>43</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>40</th>\n",
       "      <td>important parameters</td>\n",
       "      <td>41</td>\n",
       "      <td>0.07</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>39</th>\n",
       "      <td>load</td>\n",
       "      <td>40</td>\n",
       "      <td>0.09</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>critical load</td>\n",
       "      <td>39</td>\n",
       "      <td>0.12</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>friction</td>\n",
       "      <td>38</td>\n",
       "      <td>0.14</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>coefficient of friction</td>\n",
       "      <td>36</td>\n",
       "      <td>0.19</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>material samples</td>\n",
       "      <td>35</td>\n",
       "      <td>0.21</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>interfacial properties</td>\n",
       "      <td>34</td>\n",
       "      <td>0.23</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>deeper understand</td>\n",
       "      <td>32</td>\n",
       "      <td>0.28</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>block structure</td>\n",
       "      <td>31</td>\n",
       "      <td>0.30</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>film structure</td>\n",
       "      <td>29</td>\n",
       "      <td>0.35</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>layered film structure</td>\n",
       "      <td>28</td>\n",
       "      <td>0.37</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>structural samples</td>\n",
       "      <td>25</td>\n",
       "      <td>0.44</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>characterisation</td>\n",
       "      <td>24</td>\n",
       "      <td>0.47</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>tribological performance</td>\n",
       "      <td>22</td>\n",
       "      <td>0.51</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>microscratch test</td>\n",
       "      <td>21</td>\n",
       "      <td>0.53</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>magnitude</td>\n",
       "      <td>19</td>\n",
       "      <td>0.58</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1124297799</td>\n",
       "      <td>A review on the mechanical properties for thin...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>52</th>\n",
       "      <td>magnetite nanoparticles</td>\n",
       "      <td>53</td>\n",
       "      <td>0.04</td>\n",
       "      <td>1</td>\n",
       "      <td>pub.1122086607</td>\n",
       "      <td>Metal-organic framework-coated magnetite nanop...</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2624 rows × 7 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                        name  position  score  frequency           pubid  \\\n",
       "10                properties        11   0.71         37  pub.1112946271   \n",
       "7                  materials         8   0.79         37  pub.1112946271   \n",
       "17              applications        18   0.11         32  pub.1122256034   \n",
       "3                     method         4   0.40         25  pub.1120445400   \n",
       "5                    effects         6   0.85         25  pub.1112946271   \n",
       "6                  structure         7   0.82         24  pub.1112946271   \n",
       "33                  addition        34   0.37         20  pub.1112218495   \n",
       "46               performance        47   0.04         17  pub.1123780721   \n",
       "12                   process        13   0.82         16  pub.1123754647   \n",
       "24                    system        25   0.29         14  pub.1112946271   \n",
       "2                 composites         3   0.96         14  pub.1123780721   \n",
       "33              spectroscopy        34   0.49         14  pub.1123754647   \n",
       "1                    surface         2   0.95         14  pub.1122256034   \n",
       "59                  solution        60   0.09         13  pub.1123754647   \n",
       "10                microscopy        11   0.44         13  pub.1124068441   \n",
       "23                 technique        24   0.65         13  pub.1123754647   \n",
       "15                   devices        16   0.74         13  pub.1123924946   \n",
       "21                     layer        22   0.68         12  pub.1123754647   \n",
       "11                      work        12   0.81         12  pub.1123747931   \n",
       "9        electron microscopy        10   0.50         12  pub.1124068441   \n",
       "32                      time        33   0.52         11  pub.1121960617   \n",
       "26             concentration        27   0.46         11  pub.1123678421   \n",
       "5                    results         6   0.82         11  pub.1123814693   \n",
       "13                 mechanism        14   0.58         11  pub.1123769652   \n",
       "10                     oxide        11   0.79         11  pub.1123780721   \n",
       "35                 stability        36   0.33         11  pub.1112218495   \n",
       "1                  synthesis         2   0.80         10  pub.1120445400   \n",
       "30               temperature        31   0.47         10  pub.1123747931   \n",
       "14                conditions        15   0.55         10  pub.1123769652   \n",
       "5                   polymers         6   0.74         10  pub.1122256034   \n",
       "..                       ...       ...    ...        ...             ...   \n",
       "5         reversible complex         6   0.79          1  pub.1124269456   \n",
       "6                  complexes         7   0.75          1  pub.1124269456   \n",
       "7                    polyols         8   0.71          1  pub.1124269456   \n",
       "8                     sugars         9   0.67          1  pub.1124269456   \n",
       "10                 diphenols        11   0.58          1  pub.1124269456   \n",
       "17      different magnitudes        18   0.60          1  pub.1124297799   \n",
       "11          unique chemistry        12   0.54          1  pub.1124269456   \n",
       "13  therapeutic applications        14   0.46          1  pub.1124269456   \n",
       "19               sialic acid        20   0.21          1  pub.1124269456   \n",
       "1     significant advantages         2   0.98          1  pub.1122256646   \n",
       "3                  cheapness         4   0.94          1  pub.1122256646   \n",
       "4           high flexibility         5   0.92          1  pub.1122256646   \n",
       "42       adhesion properties        43   0.02          1  pub.1124297799   \n",
       "40      important parameters        41   0.07          1  pub.1124297799   \n",
       "39                      load        40   0.09          1  pub.1124297799   \n",
       "38             critical load        39   0.12          1  pub.1124297799   \n",
       "37                  friction        38   0.14          1  pub.1124297799   \n",
       "35   coefficient of friction        36   0.19          1  pub.1124297799   \n",
       "34          material samples        35   0.21          1  pub.1124297799   \n",
       "33    interfacial properties        34   0.23          1  pub.1124297799   \n",
       "31         deeper understand        32   0.28          1  pub.1124297799   \n",
       "30           block structure        31   0.30          1  pub.1124297799   \n",
       "28            film structure        29   0.35          1  pub.1124297799   \n",
       "27    layered film structure        28   0.37          1  pub.1124297799   \n",
       "24        structural samples        25   0.44          1  pub.1124297799   \n",
       "23          characterisation        24   0.47          1  pub.1124297799   \n",
       "21  tribological performance        22   0.51          1  pub.1124297799   \n",
       "20         microscratch test        21   0.53          1  pub.1124297799   \n",
       "18                 magnitude        19   0.58          1  pub.1124297799   \n",
       "52   magnetite nanoparticles        53   0.04          1  pub.1122086607   \n",
       "\n",
       "                                                title  year  \n",
       "10  Synthesis and modelling of the mechanical prop...  2019  \n",
       "7   Synthesis and modelling of the mechanical prop...  2019  \n",
       "17                            The Surface of Polymers  2019  \n",
       "3   Graphene oxide synthesis by facile method and ...  2019  \n",
       "5   Synthesis and modelling of the mechanical prop...  2019  \n",
       "6   Synthesis and modelling of the mechanical prop...  2019  \n",
       "33  Simultaneously enhanced optical, electrical, a...  2019  \n",
       "46  Synergetic Performance of Graphene Oxide and C...  2019  \n",
       "12  Nanolayer Film on Poly(Styrene/Ethylene Glycol...  2019  \n",
       "24  Synthesis and modelling of the mechanical prop...  2019  \n",
       "2   Synergetic Performance of Graphene Oxide and C...  2019  \n",
       "33  Nanolayer Film on Poly(Styrene/Ethylene Glycol...  2019  \n",
       "1                             The Surface of Polymers  2019  \n",
       "59  Nanolayer Film on Poly(Styrene/Ethylene Glycol...  2019  \n",
       "10  Photocatalytic Degradation of Organic Pollutan...  2019  \n",
       "23  Nanolayer Film on Poly(Styrene/Ethylene Glycol...  2019  \n",
       "15  Thermal Analysis and Operational Characteristi...  2019  \n",
       "21  Nanolayer Film on Poly(Styrene/Ethylene Glycol...  2019  \n",
       "11  Porosity‐Engineering MXene as Supporting Mater...  2019  \n",
       "9   Photocatalytic Degradation of Organic Pollutan...  2019  \n",
       "32  UV cross-linked polyvinylpyrrolidone electrosp...  2019  \n",
       "26  Removal of Formaldehyde from Aqueous Solution ...  2019  \n",
       "5   Enhanced adsorption of sulfonamide antibiotics...  2019  \n",
       "13  Indirect detection of 5-hydroxytryptamine and ...  2019  \n",
       "10  Synergetic Performance of Graphene Oxide and C...  2019  \n",
       "35  Simultaneously enhanced optical, electrical, a...  2019  \n",
       "1   Graphene oxide synthesis by facile method and ...  2019  \n",
       "30  Porosity‐Engineering MXene as Supporting Mater...  2019  \n",
       "14  Indirect detection of 5-hydroxytryptamine and ...  2019  \n",
       "5                             The Surface of Polymers  2019  \n",
       "..                                                ...   ...  \n",
       "5   Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "6   Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "7   Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "8   Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "10  Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "17  A review on the mechanical properties for thin...  2019  \n",
       "11  Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "13  Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "19  Phenylboronic acid-decorated polymeric nanomat...  2019  \n",
       "1   Surface Modification of Polymer Substrates for...  2019  \n",
       "3   Surface Modification of Polymer Substrates for...  2019  \n",
       "4   Surface Modification of Polymer Substrates for...  2019  \n",
       "42  A review on the mechanical properties for thin...  2019  \n",
       "40  A review on the mechanical properties for thin...  2019  \n",
       "39  A review on the mechanical properties for thin...  2019  \n",
       "38  A review on the mechanical properties for thin...  2019  \n",
       "37  A review on the mechanical properties for thin...  2019  \n",
       "35  A review on the mechanical properties for thin...  2019  \n",
       "34  A review on the mechanical properties for thin...  2019  \n",
       "33  A review on the mechanical properties for thin...  2019  \n",
       "31  A review on the mechanical properties for thin...  2019  \n",
       "30  A review on the mechanical properties for thin...  2019  \n",
       "28  A review on the mechanical properties for thin...  2019  \n",
       "27  A review on the mechanical properties for thin...  2019  \n",
       "24  A review on the mechanical properties for thin...  2019  \n",
       "23  A review on the mechanical properties for thin...  2019  \n",
       "21  A review on the mechanical properties for thin...  2019  \n",
       "20  A review on the mechanical properties for thin...  2019  \n",
       "18  A review on the mechanical properties for thin...  2019  \n",
       "52  Metal-organic framework-coated magnetite nanop...  2019  \n",
       "\n",
       "[2624 rows x 7 columns]"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "concepts.drop_duplicates(\"name\").sort_values(\"frequency\", ascending=False)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false"
   },
   "source": [
    "E.g. Sorting by **score** permits to identify concepts that are both frequent and important."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {
    "Collapsed": "false"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>position</th>\n",
       "      <th>score</th>\n",
       "      <th>frequency</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>name</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>properties</th>\n",
       "      <td>651</td>\n",
       "      <td>23.78</td>\n",
       "      <td>1369</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>materials</th>\n",
       "      <td>768</td>\n",
       "      <td>21.95</td>\n",
       "      <td>1369</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>method</th>\n",
       "      <td>463</td>\n",
       "      <td>14.32</td>\n",
       "      <td>625</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>structure</th>\n",
       "      <td>586</td>\n",
       "      <td>13.68</td>\n",
       "      <td>576</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>applications</th>\n",
       "      <td>949</td>\n",
       "      <td>13.56</td>\n",
       "      <td>1024</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>effects</th>\n",
       "      <td>601</td>\n",
       "      <td>12.82</td>\n",
       "      <td>625</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>composites</th>\n",
       "      <td>221</td>\n",
       "      <td>9.70</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>oxide</th>\n",
       "      <td>92</td>\n",
       "      <td>9.21</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>work</th>\n",
       "      <td>180</td>\n",
       "      <td>8.54</td>\n",
       "      <td>144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>performance</th>\n",
       "      <td>435</td>\n",
       "      <td>8.04</td>\n",
       "      <td>289</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>process</th>\n",
       "      <td>408</td>\n",
       "      <td>7.99</td>\n",
       "      <td>256</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>surface</th>\n",
       "      <td>429</td>\n",
       "      <td>7.49</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>addition</th>\n",
       "      <td>634</td>\n",
       "      <td>7.41</td>\n",
       "      <td>400</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>system</th>\n",
       "      <td>290</td>\n",
       "      <td>7.41</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>spectroscopy</th>\n",
       "      <td>400</td>\n",
       "      <td>7.38</td>\n",
       "      <td>196</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>graphene oxide</th>\n",
       "      <td>42</td>\n",
       "      <td>7.27</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>microscopy</th>\n",
       "      <td>303</td>\n",
       "      <td>7.26</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>technique</th>\n",
       "      <td>291</td>\n",
       "      <td>7.24</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>layer</th>\n",
       "      <td>287</td>\n",
       "      <td>7.12</td>\n",
       "      <td>144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>solution</th>\n",
       "      <td>345</td>\n",
       "      <td>6.77</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>sensors</th>\n",
       "      <td>161</td>\n",
       "      <td>6.75</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>electron microscopy</th>\n",
       "      <td>304</td>\n",
       "      <td>6.28</td>\n",
       "      <td>144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>devices</th>\n",
       "      <td>397</td>\n",
       "      <td>6.23</td>\n",
       "      <td>169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>graphene</th>\n",
       "      <td>87</td>\n",
       "      <td>6.09</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>technology</th>\n",
       "      <td>105</td>\n",
       "      <td>6.06</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>polymers</th>\n",
       "      <td>213</td>\n",
       "      <td>6.02</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>time</th>\n",
       "      <td>245</td>\n",
       "      <td>5.96</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>films</th>\n",
       "      <td>225</td>\n",
       "      <td>5.49</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>reaction</th>\n",
       "      <td>227</td>\n",
       "      <td>5.31</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mechanical properties</th>\n",
       "      <td>76</td>\n",
       "      <td>5.27</td>\n",
       "      <td>49</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>adhesion properties</th>\n",
       "      <td>43</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>new developments</th>\n",
       "      <td>55</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>purification membranes</th>\n",
       "      <td>55</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>drug delivery</th>\n",
       "      <td>99</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>triboelectric energy</th>\n",
       "      <td>53</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>reverse electrodialysis</th>\n",
       "      <td>63</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>gate HEMTs</th>\n",
       "      <td>48</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>incorporation content</th>\n",
       "      <td>65</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>remediation</th>\n",
       "      <td>47</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>removal of dyes</th>\n",
       "      <td>54</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>good thermoelectric materials</th>\n",
       "      <td>52</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>simulation study</th>\n",
       "      <td>57</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>supercapacitors</th>\n",
       "      <td>56</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>different organic solvents</th>\n",
       "      <td>51</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>alumina</th>\n",
       "      <td>62</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>MEMS humidity sensor</th>\n",
       "      <td>52</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>antimicrobial activity</th>\n",
       "      <td>56</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>nanotube sheets</th>\n",
       "      <td>42</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>module</th>\n",
       "      <td>66</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>overall water</th>\n",
       "      <td>57</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>cubic SiC</th>\n",
       "      <td>43</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>organic surface modifiers</th>\n",
       "      <td>52</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>stranded DNA</th>\n",
       "      <td>44</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>interacts</th>\n",
       "      <td>48</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>HPLC method</th>\n",
       "      <td>48</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>crystallisation</th>\n",
       "      <td>47</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>doped</th>\n",
       "      <td>44</td>\n",
       "      <td>0.02</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>templated carbons</th>\n",
       "      <td>68</td>\n",
       "      <td>0.01</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>LEDs</th>\n",
       "      <td>70</td>\n",
       "      <td>0.01</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>delivery</th>\n",
       "      <td>100</td>\n",
       "      <td>0.01</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2624 rows × 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                               position  score  frequency\n",
       "name                                                     \n",
       "properties                          651  23.78       1369\n",
       "materials                           768  21.95       1369\n",
       "method                              463  14.32        625\n",
       "structure                           586  13.68        576\n",
       "applications                        949  13.56       1024\n",
       "effects                             601  12.82        625\n",
       "composites                          221   9.70        196\n",
       "oxide                                92   9.21        121\n",
       "work                                180   8.54        144\n",
       "performance                         435   8.04        289\n",
       "process                             408   7.99        256\n",
       "surface                             429   7.49        196\n",
       "addition                            634   7.41        400\n",
       "system                              290   7.41        196\n",
       "spectroscopy                        400   7.38        196\n",
       "graphene oxide                       42   7.27         64\n",
       "microscopy                          303   7.26        169\n",
       "technique                           291   7.24        169\n",
       "layer                               287   7.12        144\n",
       "solution                            345   6.77        169\n",
       "sensors                             161   6.75        100\n",
       "electron microscopy                 304   6.28        144\n",
       "devices                             397   6.23        169\n",
       "graphene                             87   6.09         64\n",
       "technology                          105   6.06         64\n",
       "polymers                            213   6.02        100\n",
       "time                                245   5.96        121\n",
       "films                               225   5.49         81\n",
       "reaction                            227   5.31         81\n",
       "mechanical properties                76   5.27         49\n",
       "...                                 ...    ...        ...\n",
       "adhesion properties                  43   0.02          1\n",
       "new developments                     55   0.02          1\n",
       "purification membranes               55   0.02          1\n",
       "drug delivery                        99   0.02          1\n",
       "triboelectric energy                 53   0.02          1\n",
       "reverse electrodialysis              63   0.02          1\n",
       "gate HEMTs                           48   0.02          1\n",
       "incorporation content                65   0.02          1\n",
       "remediation                          47   0.02          1\n",
       "removal of dyes                      54   0.02          1\n",
       "good thermoelectric materials        52   0.02          1\n",
       "simulation study                     57   0.02          1\n",
       "supercapacitors                      56   0.02          1\n",
       "different organic solvents           51   0.02          1\n",
       "alumina                              62   0.02          1\n",
       "MEMS humidity sensor                 52   0.02          1\n",
       "antimicrobial activity               56   0.02          1\n",
       "nanotube sheets                      42   0.02          1\n",
       "module                               66   0.02          1\n",
       "overall water                        57   0.02          1\n",
       "cubic SiC                            43   0.02          1\n",
       "organic surface modifiers            52   0.02          1\n",
       "stranded DNA                         44   0.02          1\n",
       "interacts                            48   0.02          1\n",
       "HPLC method                          48   0.02          1\n",
       "crystallisation                      47   0.02          1\n",
       "doped                                44   0.02          1\n",
       "templated carbons                    68   0.01          1\n",
       "LEDs                                 70   0.01          1\n",
       "delivery                            100   0.01          1\n",
       "\n",
       "[2624 rows x 3 columns]"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "concepts.groupby(\"name\").sum().sort_values(\"score\", ascending=False)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "WkolG6VKR4Dj"
   },
   "source": [
    "## Conclusions \n",
    "\n",
    "Moving Dimensions API results to pandas dataframes **makes it easier** to **analyze the data** and **answer research questions**. \n",
    "\n",
    "Note: the examples above only scratch the surface of what can be done with pandas! "
   ]
  }
 ],
 "metadata": {
  "colab": {
   "collapsed_sections": [],
   "name": "3-Working-with-dataframes.ipynb",
   "provenance": [],
   "toc_visible": true
  },
  "kernel_info": {
   "name": "python3"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.4"
  },
  "nteract": {
   "version": "0.14.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
